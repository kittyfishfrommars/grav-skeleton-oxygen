/* skel-layers.js v2.2.1 | (c) n33 | getskel.com | MIT licensed */
!function(e){"function"==typeof define&&define.amd?define(["jquery","skel"],e):e(jQuery,skel)}(function(e,s){s.registerPlugin("layers",function(e){function i(e,s,i){var n,r,a=this;this.id=e,this.index=i,this.events={},this.config={breakpoints:null,states:null,position:null,side:null,animation:"none",orientation:"none",width:"auto",height:"auto",maxWidth:"100%",maxHeight:"100%",zIndex:this.index,html:"",hidden:!1,exclusive:null,resetScroll:!0,resetForms:!0,swipeToHide:!0,clickToHide:!1},t._.extend(this.config,s),null===this.config.exclusive&&(this.config.exclusive=this.config.hidden),this.element=t._.newDiv(this.config.html),this.element.id=e,this.element._layer=this,this.$element=null,this.touchPosX=null,this.touchPosY=null,this.visible=!1,r=t._.newElement(this.id,this.element,"skel_layers_hiddenWrapper",1),r.onAttach=function(){var e=this.object._layer;e.isInitialized()||e.init(),e.resume()},r.onDetach=function(){var e=this.object._layer;e.suspend()},a.config.states&&a.config.states!=t._.sd?(t._.cacheElement(r),n=t._.getArray(a.config.states),t._.iterate(n,function(e){t._.addCachedElementToState(n[e],r)})):a.config.breakpoints?(t._.cacheElement(r),n=t._.getArray(a.config.breakpoints),t._.iterate(n,function(e){t._.addCachedElementToBreakpoint(n[e],r)})):t._.attachElement(r)}if("undefined"==typeof e)return!1;e.fn._skel_layers_demote=function(){if(this.length>1){for(var s=0;s<this.length;s++)e(this[s])._skel_layers_demote();return e(this)}var i=e(this);return i.css("z-index",i.data("skel-layers-layer-z-index")).data("skel-layers-layer-z-index",""),i},e.fn._skel_layers_expandCell=function(){var s=e(this),i=s.parent(),t=12;i.children().each(function(){var s=e(this),i=s.attr("class");i&&i.match(/(\s+|^)([0-9]+)u(\s+|$)/)&&(t-=parseInt(RegExp.$2))}),t>0&&(s._skel_layers_initializeCell(),s.css("width",(s.data("cell-size")+t)/12*100+"%"))},e.fn._skel_layers_hasParent=function(){return e(this).parents().length>0},e.fn._skel_layers_initializeCell=function(){var s=e(this);s.attr("class").match(/(\s+|^)([0-9]+)u(\s+|$)/)&&s.data("cell-size",parseInt(RegExp.$2))},e.fn._skel_layers_promote=function(s){if(this.length>1){for(var i=0;i<this.length;i++)e(this[i])._skel_layers_promote(s);return e(this)}var n,r=e(this);return isNaN(n=parseInt(r.data("skel-layers-layer-index")))&&(n=0),r.data("skel-layers-layer-z-index",r.css("z-index")).css("z-index",t.config.baseZIndex+n+(s?s:1)),r},e.fn._skel_layers_resetForms=function(){var s=e(this);return e(this).find("form").each(function(){this.reset()}),s},e.fn._skel_layers_xcss=function(s,i){return e(this).css(s,i).css("-moz-"+s,"-moz-"+i).css("-webkit-"+s,"-webkit-"+i).css("-o-"+s,"-o-"+i).css("-ms-"+s,"-ms-"+i)},e.fn._skel_layers_xcssProperty=function(s,i){return e(this).css(s,i).css("-moz-"+s,i).css("-webkit-"+s,i).css("-o-"+s,i).css("-ms-"+s,i)},e.fn._skel_layers_xcssValue=function(s,i){return e(this).css(s,i).css(s,"-moz-"+i).css(s,"-webkit-"+i).css(s,"-o-"+i).css(s,"-ms-"+i)},e.fn._skel_layers_uncss=function(){var i=e(this),t=i.data("skel-layers-css"),n={};return!t||i.data("skel-layers-css-values")?i:(s.iterate(t,function(e){var s=i.css(t[e]);s&&(n[t[e]]=s,i.css(t[e],""))}),void i.data("skel-layers-css-values",n))},e.fn._skel_layers_recss=function(){var i=e(this),t=i.data("skel-layers-css-values");return t?(s.iterate(t,function(e){i.css(e,t[e])}),void i.removeData("skel-layers-css-values")):i},i.prototype.animations={none:{show:function(e){var s=e.config,i=e.$element;i.scrollTop(0)._skel_layers_promote(s.zIndex).show(),s.resetForms&&i._skel_layers_resetForms(),s.exclusive&&t.lockView("x"),e.moveToVisibleWrapper(),e.trigger("showstart"),e.trigger("showend")},hide:function(e){var s=e.config,i=e.$element;i.find("*").trigger("blur",[!0]),s.exclusive&&t.unlockView("x"),e.moveToHiddenWrapper(),i._skel_layers_demote().hide(),e.trigger("hidestart"),e.trigger("hideend")}},fade:{show:function(e){var s=e.config,i=e.$element;i.scrollTop(0)._skel_layers_promote(s.zIndex).css("opacity",0).show(),s.resetForms&&i._skel_layers_resetForms(),s.exclusive&&t.lockView("x"),e.moveToVisibleWrapper(),e.trigger("showstart"),window.setTimeout(function(){i._skel_layers_fadeIn(function(){e.trigger("showend")})},50)},hide:function(e){var s=e.config,i=e.$element;i.find("*").trigger("blur",[!0]),e.trigger("hidestart"),i._skel_layers_fadeOut(function(){s.exclusive&&t.unlockView("x"),e.moveToHiddenWrapper(),i._skel_layers_demote().hide(),e.trigger("hideend")})}},overlayX:{show:function(e){var s=e.config,i=e.$element;i.scrollTop(0)._skel_layers_promote(s.zIndex).css(s.side,"-"+t.recalcW(s._width)+"px").show(),s.resetForms&&i._skel_layers_resetForms(),s.exclusive&&t.lockView("x"),e.moveToVisibleWrapper(),e.trigger("showstart"),window.setTimeout(function(){i._skel_layers_translate(("right"==s.side?"-":"")+t.recalcW(s._width),0),window.setTimeout(function(){e.trigger("showend")},t.config.speed)},50)},hide:function(e){var s=e.config,i=e.$element;i.find("*").trigger("blur",[!0]),e.trigger("hidestart"),i._skel_layers_translateOrigin(),window.setTimeout(function(){s.exclusive&&t.unlockView("x"),e.moveToHiddenWrapper(),i._skel_layers_demote().hide(),e.trigger("hideend")},t.config.speed+50)}},overlayY:{show:function(e){var s=e.config,i=e.$element;i.scrollTop(0)._skel_layers_promote(s.zIndex).css(s.side,"-"+t.recalcW(s._height)+"px").show(),s.resetForms&&i._skel_layers_resetForms(),s.exclusive&&t.lockView("y"),e.moveToVisibleWrapper(),e.trigger("showstart"),window.setTimeout(function(){i._skel_layers_translate(0,("bottom"==s.side?"-":"")+t.recalcW(s._height)),window.setTimeout(function(){e.trigger("showend")},t.config.speed)},50)},hide:function(e){var s=e.config,i=e.$element;i.find("*").trigger("blur",[!0]),e.trigger("hidestart"),i._skel_layers_translateOrigin(),window.setTimeout(function(){s.exclusive&&t.unlockView("y"),e.moveToHiddenWrapper(),i._skel_layers_demote().hide(),e.trigger("hideend")},t.config.speed+50)}},pushX:{show:function(e){var s=e.config,i=e.$element,n=t.cache.wrapper.add(t.cache.visibleWrapper.children());i.scrollTop(0).css(s.side,"-"+t.recalcW(s._width)+"px").show(),s.resetForms&&i._skel_layers_resetForms(),n._skel_layers_promote(),s.exclusive&&t.lockView("x"),e.moveToVisibleWrapper(),e.trigger("showstart"),window.setTimeout(function(){i.add(n)._skel_layers_translate(("right"==s.side?"-":"")+t.recalcW(s._width),0),window.setTimeout(function(){e.trigger("showend")},t.config.speed)},50)},hide:function(e){var s=e.config,i=e.$element,n=t.cache.wrapper.add(t.cache.visibleWrapper.children());i.find("*").trigger("blur",[!0]),e.trigger("hidestart"),i.add(n)._skel_layers_translateOrigin(),window.setTimeout(function(){s.exclusive&&t.unlockView("x"),i.hide(),e.moveToHiddenWrapper(),n._skel_layers_demote(),e.trigger("hideend")},t.config.speed+50)}},pushY:{show:function(e){var s=e.config,i=e.$element,n=t.cache.wrapper.add(t.cache.visibleWrapper.children());i.scrollTop(0).css(s.side,"-"+t.recalcH(s._height)+"px").show(),s.resetForms&&i._skel_layers_resetForms(),s.exclusive&&t.lockView("y"),e.moveToVisibleWrapper(),e.trigger("showstart"),window.setTimeout(function(){i.add(n)._skel_layers_translate(0,("bottom"==s.side?"-":"")+t.recalcH(s._height)),window.setTimeout(function(){e.trigger("showend")},t.config.speed)},50)},hide:function(e){var s=e.config,i=e.$element,n=t.cache.wrapper.add(t.cache.visibleWrapper.children());i.find("*").trigger("blur",[!0]),e.trigger("hidestart"),i.add(n)._skel_layers_translateOrigin(),window.setTimeout(function(){s.exclusive&&t.unlockView("y"),i.hide(),e.moveToHiddenWrapper(),e.trigger("hideend")},t.config.speed+50)}},revealX:{show:function(e){var s=e.config,i=e.$element,n=t.cache.wrapper.add(t.cache.visibleWrapper.children());i.scrollTop(0).show(),s.resetForms&&i._skel_layers_resetForms(),n._skel_layers_promote(),s.exclusive&&t.lockView("x"),e.moveToVisibleWrapper(),e.trigger("showstart"),window.setTimeout(function(){n._skel_layers_translate(("right"==s.side?"-":"")+t.recalcW(s._width),0),window.setTimeout(function(){e.trigger("showend")},t.config.speed)},50)},hide:function(e){var s=e.config,i=e.$element,n=t.cache.wrapper.add(t.cache.visibleWrapper.children());i.find("*").trigger("blur",[!0]),e.trigger("hidestart"),n._skel_layers_translateOrigin(),window.setTimeout(function(){s.exclusive&&t.unlockView("x"),i.hide(),n._skel_layers_demote(),e.moveToHiddenWrapper(),e.trigger("hideend")},t.config.speed+50)}}},i.prototype.positions={"top-left":{v:"top",h:"left",side:"left"},"top-right":{v:"top",h:"right",side:"right"},top:{v:"top",h:"center",side:"top"},"top-center":{v:"top",h:"center",side:"top"},"bottom-left":{v:"bottom",h:"left",side:"left"},"bottom-right":{v:"bottom",h:"right",side:"right"},bottom:{v:"bottom",h:"center",side:"bottom"},"bottom-center":{v:"bottom",h:"center",side:"bottom"},left:{v:"center",h:"left",side:"left"},"center-left":{v:"center",h:"left",side:"left"},right:{v:"center",h:"right",side:"right"},"center-right":{v:"center",h:"right",side:"right"},center:{v:"center",h:"center",side:!1},"center-center":{v:"center",h:"center",side:!1}},i.prototype.on=function(e,s){this.events[e]||(this.events[e]=[]),this.events[e].push(s)},i.prototype.trigger=function(e){if(this.events[e]&&0!=this.events[e].length){var s=this;t._.iterate(this.events[e],function(i){s.events[e][i]()})}},i.prototype.show=function(e){if(this.visible)return void t.cache.visibleWrapper.append(this.element);var s,i=this,n=this.config,r=t._.useActive(n.animation),a=this.$element;switch(a.css("max-width","").css("max-height","").css("width","").css("height",""),n._width=t._.useActive(n.width),n._height=t._.useActive(n.height),"auto"==n._width&&(n._width=a.outerWidth()+1),"auto"==n._height&&(n._height=a.outerHeight()+1),("100%"!=n.maxWidth||"auto"==n.width)&&(n._width=t.recalcW(n._width),n._maxWidth=t.recalcW(t._.useActive(n.maxWidth)),n._width=Math.min(n._width,n._maxWidth)),("100%"!=n.maxHeight||"auto"==n.height)&&(n._height=t.recalcH(n._height),n._maxHeight=t.recalcH(t._.useActive(n.maxHeight)),n._height=Math.min(n._height,n._maxHeight)),a.css("width",n._width).css("height",n._height),"ios"==t._.vars.deviceType&&("100%"!=n._height||n.hidden||a.css("height","-webkit-calc("+n._height+" + 70px)"),a.on("blur","input,select,textarea",function(e,s){s||window.setTimeout(function(){t.cache.hiddenWrapper.append(i.element),window.setTimeout(function(){t.cache.visibleWrapper.append(i.element)},500)},500)})),s=this.positions[n.position],a.addClass("skel-layer-"+n.position).data("skel-layers-layer-position",n.position),s.v){case"top":a.css("top",0);break;case"bottom":a.css("bottom",0);break;case"center":a.css("top","50%").css("margin-top","-"+t.getHalf(n._height))}switch(s.h){case"left":a.css("left",0);break;case"right":a.css("right",0);break;case"center":a.css("left","50%").css("margin-left","-"+t.getHalf(n._width))}this.animations[r].show(this),n.exclusive&&(t.cache.body.addClass("skel-layers-exclusiveVisible"),t.cache.exclusiveLayer=this),this.visible=!0,this.trigger("show")},i.prototype.hide=function(e){if(!this.visible)return void t.cache.hiddenWrapper.append(this.element);var s=this.config,i=t._.useActive(s.animation);i in this.animations||(i="none"),this.animations[i].hide(this),s.exclusive&&t.cache.exclusiveLayer===this&&(t.cache.body.removeClass("skel-layers-exclusiveVisible"),t.cache.exclusiveLayer=null),this.trigger("hide"),this.visible=!1},i.prototype.init=function(){var s=this.config,i=e(this.element),n=this;switch(i._skel_layers_init(),i.find("*").each(function(){t.parseInit(e(this))}),i.addClass("skel-layer").data("skel-layers-layer-index",this.index).css("z-index",t.config.baseZIndex).css("position","fixed").css("-ms-overflow-style","-ms-autohiding-scrollbar").css("-webkit-overflow-scrolling","touch").hide(),s.orientation){case"vertical":i.css("overflow-y","auto").css("overflow-x","hidden");break;case"horizontal":i.css("overflow-x","auto").css("overflow-y","hidden");break;case"none":}s.position&&s.position in this.positions||(s.position="top-left"),s.side||(s.side=this.positions[s.position].side),s.animation&&("object"==typeof s.animation||s.animation in this.animations)||(s.animation="none"),s.clickToHide&&i.find("a").css("-webkit-tap-highlight-color","rgba(0,0,0,0)").on("click.skel-layers",function(s){var i=e(this);if(!i.hasClass("skel-layers-ignore")&&(s.preventDefault(),s.stopPropagation(),n.hide(),!i.hasClass("skel-layers-ignoreHref"))){var r=i.attr("href"),a=i.attr("target");"undefined"!=typeof r&&""!=r&&window.setTimeout(function(){"_blank"==a&&"wp"!=t._.vars.deviceType?window.open(r):window.location.href=r},t.config.speed+10)}}),i.on("touchstart",function(e){n.touchPosX=e.originalEvent.touches[0].pageX,n.touchPosY=e.originalEvent.touches[0].pageY}).on("touchmove",function(e){if(null!==n.touchPosX&&null!==n.touchPosY){var t=n.touchPosX-e.originalEvent.touches[0].pageX,r=n.touchPosY-e.originalEvent.touches[0].pageY,a=i.outerHeight(),o=i.get(0).scrollHeight-i.scrollTop();if(s.hidden&&s.swipeToHide){var c=!1,l=20,h=50;switch(s.side){case"left":c=l>r&&r>-1*l&&t>h;break;case"right":c=l>r&&r>-1*l&&-1*h>t;break;case"top":c=l>t&&t>-1*l&&r>h;break;case"bottom":c=l>t&&t>-1*l&&-1*h>r}if(c)return n.touchPosX=null,n.touchPosY=null,n.hide(),!1}return 0==i.scrollTop()&&0>r||o>a-2&&a+2>o&&r>0?!1:void 0}}),this.$element=i},i.prototype.isInitialized=function(){return null!==this.$element},i.prototype.isVisible=function(){return this.$element.is(":visible")},i.prototype.moveToVisibleWrapper=function(){t.cache.visibleWrapper.append(this.$element)},i.prototype.moveToHiddenWrapper=function(){this.$element._skel_layers_hasParent()&&t.cache.hiddenWrapper.append(this.$element)},i.prototype.resume=function(s){this.isInitialized()&&(this.$element.find("*").each(function(){t.parseResume(e(this))}),this.config.hidden||this.show(s))},i.prototype.suspend=function(){this.isInitialized()&&(this.$element._skel_layers_translateOrigin(),this.$element.find("*").each(function(){t.parseSuspend(e(this))}),this.visible&&this.hide())};var t={cache:{visibleWrapper:null,body:null,exclusiveLayer:null,document:null,html:null,htmlbody:null,hiddenWrapper:null,layers:{},parent:null,window:null,wrapper:null},config:{baseZIndex:1e4,layers:{},mode:"position",speed:500,easing:"ease",wrap:!0},layerIndex:1,create:function(s,n,r){var a,o;if(!(s in t.cache.layers)&&"position"in n&&(n.html||0!=(a=e("#"+s)).length))return t.config.wrap||(t.config.wrap=!0,t.initWrappers()),o=new i(s,n,t.layerIndex++),t.cache.layers[s]=o,a&&(a.children().appendTo(o.element),a.remove()),r||t._.updateState(),o},destroy:function(i){if(i in t.cache.layers){var n=t.cache.layers[i];return n.suspend(),n.config.states&&n.config.states!=t._.sd&&(a=t._.getArray(n.config.states),t._.iterate(a,function(e){t._.removeCachedElementFromState(a[e],i)})),n.config.breakpoints&&(a=t._.getArray(n.config.breakpoints),t._.iterate(a,function(e){t._.removeCachedElementFromBreakpoint(a[e],i)})),e(n.element).remove(),delete t.cache.layers[i],s.uncacheElement(i),!0}},get:function(e){return e in t.cache.layers?t.cache.layers[e]:void 0},hide:function(e){t.cache.layers[e].hide()},show:function(e){t.cache.layers[e].show()},toggle:function(e){var s=t.cache.layers[e];s.isVisible()?s.hide():s.show()},getBaseFontSize:function(){return t._.vars.IEVersion<9?16.5:parseFloat(getComputedStyle(t.cache.body.get(0)).fontSize)},getHalf:function(e){var s=parseInt(e);return"string"==typeof e&&"%"==e.charAt(e.length-1)?Math.floor(s/2)+"%":Math.floor(s/2)+"px"},lockView:function(e){"x"==e&&t.cache.htmlbody.css("overflow-x","hidden"),"transform"!=t.config.mode&&"ios"==s.vars.deviceType&&t.cache.parent.css("height",t.cache.document.height()),t.cache.wrapper.on("touchstart.lock click.lock scroll.lock",function(e){e.preventDefault(),e.stopPropagation(),t.cache.exclusiveLayer&&t.cache.exclusiveLayer.hide()}),t.cache.window.on("orientationchange.lock",function(e){t.cache.exclusiveLayer&&t.cache.exclusiveLayer.hide()}),t._.vars.isMobile||window.setTimeout(function(){t.cache.window.on("resize.lock scroll.lock",function(e){t.cache.exclusiveLayer&&t.cache.exclusiveLayer.hide()})},t.config.speed+50)},parseInit:function(s){var i,n,r,a,o=s.get(0),c=s.attr("data-action"),l=s.attr("data-args");switch(c&&l&&(l=l.split(",")),c){case"toggleLayer":case"layerToggle":s.css("-webkit-tap-highlight-color","rgba(0,0,0,0)").css("cursor","pointer").on("touchend click",function(s){var i=e(this);if(s.preventDefault(),s.stopPropagation(),i.data("skel-layers-handled")!==!0){if(i.data("skel-layers-handled",!0),window.setTimeout(function(){i.removeData("skel-layers-handled")},500),t.cache.exclusiveLayer)return t.cache.exclusiveLayer.hide(),!1;var n=t.cache.layers[l[0]];n.isVisible()?n.hide():n.show()}});break;case"navList":r=e("#"+l[0]),i=r.find("a"),n=[],i.each(function(){var s,i,t=e(this);s=Math.max(0,t.parents("li").length-1),i=t.attr("href"),n.push('<a class="link depth-'+s+'"'+("undefined"!=typeof i&&""!=i?' href="'+i+'"':"")+'><span class="indent-'+s+'"></span>'+t.text()+"</a>")}),n.length>0&&s.html("<nav>"+n.join("")+"</nav>");break;case"copyText":r=e("#"+l[0]),s.html(r.text());break;case"copyHTML":r=e("#"+l[0]),s.html(r.html());break;case"moveElementContents":r=e("#"+l[0]),o._skel_layers_resume=function(){r.children().each(function(){var i=e(this);i.hasClass("skel-layers-moved")||(s.append(i),i.addClass("skel-layers-moved"),i._skel_layers_uncss())})},o._skel_layers_suspend=function(){s.children().each(function(){var s=e(this);s.hasClass("skel-layers-moved")&&(r.append(s),s.removeClass("skel-layers-moved"),t.refresh(s),s._skel_layers_recss())})},o._skel_layers_resume();break;case"moveElement":r=e("#"+l[0]),o._skel_layers_resume=function(){r.hasClass("skel-layers-moved")||(e('<div id="skel-layers-placeholder-'+r.attr("id")+'" />').insertBefore(r),s.append(r),r.addClass("skel-layers-moved"),r._skel_layers_uncss())},o._skel_layers_suspend=function(){r.hasClass("skel-layers-moved")&&(e("#skel-layers-placeholder-"+r.attr("id")).replaceWith(r),r.removeClass("skel-layers-moved"),t.refresh(r),r._skel_layers_recss())},o._skel_layers_resume();break;case"moveCell":r=e("#"+l[0]),a=e("#"+l[1]),o._skel_layers_resume=function(){e('<div id="skel-layers-placeholder-'+r.attr("id")+'" />').insertBefore(r),s.append(r),r.css("width","auto"),a&&a._skel_layers_expandCell()},o._skel_layers_suspend=function(){e("#skel-layers-placeholder-"+r.attr("id")).replaceWith(r),r.css("width",""),a&&a.css("width","")},o._skel_layers_resume()}},parseResume:function(e){var s=e.get(0);s._skel_layers_resume&&s._skel_layers_resume()},parseSuspend:function(e){var s=e.get(0);s._skel_layers_suspend&&s._skel_layers_suspend()},recalc:function(e,s){var i,n=t._.parseMeasurement(e);switch(n[1]){case"%":i=Math.floor(s*(n[0]/100));break;case"em":i=t.getBaseFontSize()*n[0];break;default:case"px":i=n[0]}return i},recalcH:function(s){return t.recalc(s,e(window).height())},recalcW:function(s){return t.recalc(s,e(window).width())},refresh:function(s){var i;i=s?s.filter(".skel-layers-fixed:not(.skel-layers-moved)"):e(".skel-layers-fixed:not(.skel-layers-moved)"),i._skel_layers_init(!0).appendTo(t.cache.visibleWrapper)},unlockView:function(e){"x"==e&&t.cache.htmlbody.css("overflow-x",""),"transform"!=t.config.mode&&"ios"==s.vars.deviceType&&t.cache.parent.css("height",""),t.cache.wrapper.off("touchstart.lock click.lock scroll.lock"),t.cache.window.off("orientationchange.lock"),t._.vars.isMobile||t.cache.window.off("resize.lock scroll.lock")},init:function(){"config"in t.config&&(t._.extend(t.config,t.config.config),delete t.config.config),t._.iterate(t.config,function(e){t.config[e]&&"object"==typeof t.config[e]&&"position"in t.config[e]&&(t.config.layers[e]=t.config[e],delete t.config[e])}),"function"==typeof t.config.mode&&(t.config.mode=t.config.mode()),"transform"!=t.config.mode||t._.canUseProperty("transform")&&t._.canUseProperty("transition")||(t.config.mode="position"),"position"!=t.config.mode||t._.canUseProperty("transition")||(t.config.mode="animate"),"wp"==t._.vars.deviceType&&(t.config.mode="animate"),t.cache.window=e(window),e(function(){t.initAnimation(),t.initObjects(),t.config.wrap&&t.initWrappers(),t.initLayers(),t.initIncludes(),t._.updateState()})},initIncludes:function(){e(".skel-layers-include").each(function(){t.parseInit(e(this))})},initLayers:function(){t._.iterate(t.config.layers,function(e){t.create(e,t.config.layers[e],!0)})},initObjects:function(){t.cache.document=e(document),t.cache.html=e("html"),t.cache.body=e("body"),t.cache.htmlbody=e("html,body")},initAnimation:function(){if("animate"==t.config.mode?(e.fn._skel_layers_fadeIn=function(s){e(this).fadeTo(t.config.speed,1,s)},e.fn._skel_layers_fadeOut=function(s){e(this).fadeTo(t.config.speed,0,s)}):(e.fn._skel_layers_fadeIn=function(s){e(this).css("opacity",1),s&&window.setTimeout(s,t.config.speed+50)},e.fn._skel_layers_fadeOut=function(s){e(this).css("opacity",0),s&&window.setTimeout(s,t.config.speed+50)}),"transform"==t.config.mode)e.fn._skel_layers_translateOrigin=function(){return e(this)._skel_layers_translate(0,0)},e.fn._skel_layers_translate=function(s,i){return e(this).css("transform","translate("+s+"px, "+i+"px)")},e.fn._skel_layers_init=function(){return e(this).css("backface-visibility","hidden").css("perspective","500")._skel_layers_xcss("transition","transform "+t.config.speed/1e3+"s "+t.config.easing+",opacity "+t.config.speed/1e3+"s "+t.config.easing).data("skel-layers-css",["backface-visibility","perspective","-moz-transition","-webkit-transition","-o-transition","-ms-transition","transition"])};else{var n=[];"animate"==t.config.mode?(t.cache.window.resize(function(){if(0!=t.config.speed){var e=t.config.speed;t.config.speed=0,window.setTimeout(function(){t.config.speed=e,n=[]},0)}}),"ease"==t.config.easing.substr(0,4)?(t.config.easing="swing",t.config.speed=.65*t.config.speed):t.config.easing="linear",e.fn._skel_layers_doTranslate=function(s,i){e(this).animate(s,t.config.speed,t.config.easing,i)},e.fn._skel_layers_init=function(s){return e(this).css("position",s?"fixed":"absolute").data("skel-layers-css",["position"])}):(t.cache.window.resize(function(){window.setTimeout(function(){n=[]},0)}),e.fn._skel_layers_doTranslate=function(s,i){var n=e(this);t._.iterate(s,function(e){n.css(e,s[e])}),window.setTimeout(i,t.config.speed)},e.fn._skel_layers_init=function(s){return e(this).css("transition","top "+t.config.speed/1e3+"s "+t.config.easing+",right "+t.config.speed/1e3+"s "+t.config.easing+",bottom "+t.config.speed/1e3+"s "+t.config.easing+",left "+t.config.speed/1e3+"s "+t.config.easing+",opacity "+t.config.speed/1e3+"s "+t.config.easing).css("position",s?"fixed":"absolute").data("skel-layers-css",["-moz-transition","-webkit-transition","-o-transition","-ms-transition","transition","position"])}),e._skel_layers_cssNumericValue=function(e){return e&&"%"==e.slice(-1)?e:parseInt(e)},e.fn._skel_layers_translateOrigin=function(){for(var s=0;s<this.length;s++){var i=this[s],r=e(i);n[i.id]&&r._skel_layers_doTranslate(n[i.id],function(){t._.iterate(n[i.id],function(e){r.css(e,n[i.id][e])}),t.cache.parent.css("overflow-x",""),t.cache.wrapper.css("width","auto").css("padding-bottom",0)})}return e(this)},e.fn._skel_layers_translate=function(r,o){var c,l,h;for(r=parseInt(r),o=parseInt(o),0!=r?(("ios"==s.vars.deviceType?t.cache.parent:t.cache.body).css("overflow-x","hidden"),t.cache.wrapper.css("width",t.cache.window.width())):l=function(){("ios"==s.vars.deviceType?t.cache.parent:t.cache.body).css("overflow-x",""),t.cache.wrapper.css("width","auto")},0>o?t.cache.wrapper.css("padding-bottom",Math.abs(o)):h=function(){t.cache.wrapper.css("padding-bottom",0)},c=0;c<this.length;c++){var d,p=this[c],f=e(p);if(!n[p.id])if(d=i.prototype.positions[f.data("skel-layers-layer-position")]){switch(n[p.id]={},d.v){case"center":case"top":n[p.id].top=e._skel_layers_cssNumericValue(p.style.top);break;case"bottom":n[p.id].bottom=e._skel_layers_cssNumericValue(p.style.bottom)}switch(d.h){case"center":case"left":n[p.id].left=e._skel_layers_cssNumericValue(p.style.left);break;case"right":n[p.id].right=e._skel_layers_cssNumericValue(p.style.right)}}else d=f.position(),n[p.id]={top:d.top,left:d.left};a={},t._.iterate(n[p.id],function(e){var s;switch(e){case"top":s=t.recalcH(n[p.id][e])+o;break;case"bottom":s=t.recalcH(n[p.id][e])-o;break;case"left":s=t.recalcW(n[p.id][e])+r;break;case"right":s=t.recalcW(n[p.id][e])-r}a[e]=s}),f._skel_layers_doTranslate(a,function(){l&&l(),h&&h()})}return e(this)}}},initWrappers:function(){"transform"!=t.config.mode?(t.cache.body.wrapInner('<div id="skel-layers-parent" />'),t.cache.parent=e("#skel-layers-parent"),t.cache.parent.css("position","absolute").css("left",0).css("top",0).css("min-height","100%").css("width","100%")):t.cache.parent=t.cache.body,t.cache.parent.wrapInner('<div id="skel-layers-wrapper" />'),t.cache.wrapper=e("#skel-layers-wrapper"),t.cache.wrapper.css("position","relative").css("left",0).css("right",0).css("top",0)._skel_layers_init(),t.cache.hiddenWrapper=e('<div id="skel-layers-hiddenWrapper" />').appendTo(t.cache.parent),t.cache.hiddenWrapper.css("height","100%"),t.cache.visibleWrapper=e('<div id="skel-layers-visibleWrapper" />').appendTo(t.cache.parent),t.cache.visibleWrapper.css("position","relative"),t._.registerLocation("skel_layers_hiddenWrapper",t.cache.hiddenWrapper[0]),t._.registerLocation("skel_layers_visibleWrapper",t.cache.visibleWrapper[0]),t._.registerLocation("skel_layers_wrapper",t.cache.wrapper[0]),e("[autofocus]").focus(),t.refresh()}};return t}(jQuery))});